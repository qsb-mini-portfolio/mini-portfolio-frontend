/* ========= palette (keep yours) ========= */
:host {
  --bg: #0b1324;
  --card: #111a2e;
  --card-weak: #0e1626;
  --border: #243246;
  --txt: #e6efff;
  --muted: #9aa8c7;
  --accent: #6c5ce7;
  --accent-600: #5345d9;
  --success: #22c55e;
  --failure: #ef4444; /* added for negative perf */
}

/* Page */
.page {
  min-height: calc(100vh - 64px);
  background: var(--bg);
  padding: 1.25rem 2rem 2rem;
  color: var(--txt);
}

/* Sections spacing */
.section { margin: 1.25rem 0 1.5rem; }

/* ========= NEW: grid layout classes (no clash with PrimeFlex) ========= */
.dash-grid { display: grid; }
.dash-gap { gap: 1rem; }
.span-1 { grid-column: span 1; }
.span-2 { grid-column: span 2; }
.span-full { grid-column: 1 / -1; }

@media (min-width: 960px) {
  .dash-grid { grid-template-columns: repeat(3, 1fr); }
  .span-2 { grid-column: span 2; }
}

/* KPI grid (responsive) */
.kpi-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1.25rem;
}
@media (min-width: 640px) { .kpi-grid { grid-template-columns: repeat(2, 1fr); } }
@media (min-width: 1024px) { .kpi-grid { gap: 1.5rem; } }

@media (min-width: 960px) { .panel-grid { grid-template-columns: repeat(2, 1fr); } }
@media (min-width: 1280px) { .panel-grid { grid-template-columns: repeat(3, 1fr); gap: 1.5rem; } }

/* Cards / panels */
:host ::ng-deep .p-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  color: var(--txt);
}
.kpi { padding: 1.25rem 1.5rem; } /* a bit more breathing room */
.kpi-title { color: var(--muted); font-weight: 600; margin-bottom: 0.35rem; }
.kpi-value {
  font-size: 26px; font-weight: 800; letter-spacing: -0.01em;
  &.green {
    color: var(--success);
  }
  &.red {
    color: var(--failure);
  }
}
.kpi-row { display: flex; align-items: baseline; gap: 0.5rem; }
.green { color: var(--success); }
.delta { color: #62e1a0; font-weight: 600; }

.panel { padding: 1.25rem 1.25rem 1.5rem; display: flex; flex-direction: column; }
.panel-title {
  color: var(--txt);
  font-weight: 700;
  margin-bottom: 0.5rem;
  display: flex; align-items: center; justify-content: space-between; gap: 0.75rem;
}
.muted { color: var(--muted); }
.right { float: none; }

/* ========= Charts sizing (robust) ========= */
.panel apx-chart { width: 100%; height: 320px; }

/* p-card body padding */
:host ::ng-deep .p-card .p-card-body { width: 100%; padding: 0.75rem 0.75rem 1rem; }

/* Donut legend */
.legend { display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem 0.75rem; margin-top: 0.5rem; }
.legend .item { display: flex; align-items: center; gap: 0.45rem; color: var(--muted); }
.legend .dot { width: 10px; height: 10px; border-radius: 50%; display: inline-block; }

/* Lists / progress bars */
.list { display: flex; flex-direction: column; gap: 0.65rem; margin-top: 0.5rem; }
.row { display: flex; align-items: center; gap: 0.75rem; }
.label { min-width: 110px; font-weight: 600; }
.spacer { flex: 1; border-bottom: 1px dotted var(--border); opacity: 0.6; }
.value { color: var(--muted); }
:host ::ng-deep .p-progressbar { flex: 1; height: 8px; background: #0d1730; border-radius: 999px; border: 1px solid var(--border); }
:host ::ng-deep .p-progressbar-value { background: linear-gradient(90deg, #36d399, #2dd4bf); }

/* Distribution list spacing */
.dist-list { gap: 0.75rem; }
.dist-item { display: flex; flex-direction: column; gap: 0.375rem; }

/* ProgressBar: couleur par item via variable CSS */
:host ::ng-deep .dist-list .p-progressbar { height: 10px; }
:host ::ng-deep .dist-list .p-progressbar-value { background: var(--pbColor, #36d399); }

/* Page content */
.content { max-width: 1200px; margin: 1.25rem auto 0; }
.title { font-size: 32px; font-weight: 800; margin: 1.25rem 0.25rem; letter-spacing: -0.015em; }
.panel-grid {
  display: flex;
  gap: 1rem;
  width: 100%;
}

.half-width {
  flex: 1;
  min-width: 0;
}
